# MagicNodes CADE 2.5 presets

[step1]
# core
seed: 0
control_after_generate: randomize
steps: 30
cfg: 8.0
denoise: 1.0
sampler_name: ddim
scheduler: MGHybrid
iterations: 2
steps_delta: -1.04
cfg_delta: 0.03
denoise_delta: 0.28

# toggles
apply_sharpen: true
apply_upscale: true
apply_ids: true
clip_clean: true
latent_compare: true

# detail controls
#ids_strength: 0.35
ids_strength: 0.85
upscale_method: lanczos
scale_by: 1.0
scale_delta: -0.15
noise_offset: 0.29
threshold: 1.0
#Sharpnes_strenght: 0.075
Sharpnes_strenght: 0.025
accumulation: fp32+fp32

# reference clean
reference_clean: true
ref_preview: 512
ref_threshold: 0.02
ref_cooldown: 2


# guidance
guidance_mode: ZeResFDG
rescale_multiplier: 0.72
momentum_beta: 0.12
cfg_curve: 1.0
perp_damp: 0.80

# NAG
use_nag: true
nag_scale: 4.0
nag_tau: 2.5
nag_alpha: 0.25

# zero init
use_zero_init: false
zero_init_steps: 0

# FDG / ZE thresholds
fdg_low: 0.25
fdg_high: 0.7
fdg_sigma: 1.20
ze_res_zero_steps: 10
ze_adaptive: true
ze_r_switch_hi: 0.85
ze_r_switch_lo: 0.25
fdg_low_adaptive: true
fdg_low_min: 0.45
fdg_low_max: 0.85
fdg_ema_beta: 0.45


# Mahiro+/Muse blend
muse_blend: true
muse_blend_strength: 0.29

# eps scale
eps_scale_enable: true
eps_scale: 0.0025

# CLIPSeg
clipseg_enable: false
clipseg_text: hand, face
clipseg_preview: 512
clipseg_threshold: 0.30
clipseg_blur: 9.5
clipseg_dilate: 5
clipseg_gain: 0.6
clipseg_blend: fuse
clipseg_ref_gate: true
clipseg_ref_threshold: 0.005

# polish
polish_enable: false
polish_keep_low: 0.40
polish_edge_lock: 0.20
polish_sigma: 1.0
polish_start_after: 1
polish_keep_low_ramp: 0.20

# mid-frequency stabilizer (hands/objects scale)
midfreq_enable: true
midfreq_gain: 0.10
midfreq_sigma_lo: 0.90
midfreq_sigma_hi: 2.00

# QSilk-AQClip-Lite (adaptive latent clipping)
aqclip_enable: true
aq_tile: 32
aq_stride: 16
aq_alpha: 2.0

aq_attn: true

[step2]
# core
seed: 0
control_after_generate: randomize
steps: 30
cfg: 7.5
denoise: 0.65
sampler_name: ddim
scheduler: MGHybrid
iterations: 2
steps_delta: 5.00
cfg_delta: 0.03
denoise_delta: 0.0500

# toggles
apply_sharpen: false
apply_upscale: true
apply_ids: true
clip_clean: true
latent_compare: true

# detail controls
ids_strength: 0.60
upscale_method: lanczos
scale_by: 1.20
scale_delta: 0.15
noise_offset: 0.09
threshold: 1.000
Sharpnes_strenght: 0.081
accumulation: fp32+fp32

# reference clean
reference_clean: true
ref_preview: 512
ref_threshold: 0.020
ref_cooldown: 2


# guidance
guidance_mode: ZeResFDG
#rescale_multiplier: 0.75
rescale_multiplier: 0.95
momentum_beta: 0.15
cfg_curve: 0.85
perp_damp: 0.80

# NAG
use_nag: true
nag_scale: 3.0
nag_tau: 2.50
nag_alpha: 0.25

# zero init
use_zero_init: false
zero_init_steps: 0

# FDG / ZE thresholds
fdg_low: 0.55
fdg_high: 0.7
fdg_sigma: 1.10
ze_res_zero_steps: 12
ze_adaptive: true
ze_r_switch_hi: 0.85
ze_r_switch_lo: 0.25
fdg_low_adaptive: true
fdg_low_min: 0.45
fdg_low_max: 0.85
fdg_ema_beta: 0.45


# Mahiro+/Muse blend
muse_blend: true
muse_blend_strength: 0.24

# eps scale
eps_scale_enable: true
eps_scale: 0.0025

# CLIPSeg
clipseg_enable: true
clipseg_text: hand, feet, face
clipseg_preview: 512
clipseg_threshold: 0.1
clipseg_blur: 11.5
clipseg_dilate: 5
clipseg_gain: 0.35
clipseg_blend: fuse
clipseg_ref_gate: true
clipseg_ref_threshold: 0.005

# polish
polish_enable: false
polish_keep_low: 0.40
polish_edge_lock: 0.20
polish_sigma: 1.0
polish_start_after: 1
polish_keep_low_ramp: 0.20

# mid-frequency stabilizer (hands/objects scale)
midfreq_enable: true
#midfreq_gain: 0.15
midfreq_gain: 0.65
midfreq_sigma_lo: 0.90
midfreq_sigma_hi: 2.10

# QSilk-AQClip-Lite (adaptive latent clipping)
aqclip_enable: true
aq_tile: 32
aq_stride: 16
aq_alpha: 2.0

aq_attn: true

[step3]
# core
seed: 0
control_after_generate: randomize
steps: 25
cfg: 7.0
denoise: 0.60
sampler_name: ddim
scheduler: MGHybrid
iterations: 2
steps_delta: 5.00
cfg_delta: 0.03
denoise_delta: 0.0500

# toggles
apply_sharpen: false
apply_upscale: true
apply_ids: true
clip_clean: true
latent_compare: true

# detail controls
ids_strength: 0.25
upscale_method: lanczos
scale_by: 1.30
scale_delta: 0.12
noise_offset: 0.10
threshold: 1.000
#0.135
Sharpnes_strenght: 0.185
accumulation: fp32+fp32

# reference clean
reference_clean: true
ref_preview: 512
ref_threshold: 0.020
ref_cooldown: 2


# guidance
guidance_mode: ZeResFDG
rescale_multiplier: 1.10
momentum_beta: 0.37
cfg_curve: 0.65
perp_damp: 0.95

# NAG
use_nag: true
nag_scale: 4.0
nag_tau: 2.50
nag_alpha: 0.25

# zero init
use_zero_init: false
zero_init_steps: 0

# FDG / ZE thresholds
fdg_low: 0.55
fdg_high: 0.7
fdg_sigma: 1.10
ze_res_zero_steps: 12
ze_adaptive: true
ze_r_switch_hi: 0.85
ze_r_switch_lo: 0.25
fdg_low_adaptive: true
fdg_low_min: 0.45
fdg_low_max: 0.85
fdg_ema_beta: 0.45


# Mahiro+/Muse blend
muse_blend: true
muse_blend_strength: 0.29

# eps scale
eps_scale_enable: true
eps_scale: 0.0025

# CLIPSeg
clipseg_enable: true
clipseg_text: hand, feet, face
clipseg_preview: 512
clipseg_threshold: 0.1
clipseg_blur: 11.5
clipseg_dilate: 5
clipseg_gain: 0.35
clipseg_blend: fuse
clipseg_ref_gate: true
clipseg_ref_threshold: 0.005

# polish
polish_enable: false
polish_keep_low: 0.40
polish_edge_lock: 0.10
polish_sigma: 1.0
polish_start_after: 1
polish_keep_low_ramp: 0.10

# mid-frequency stabilizer (hands/objects scale)
midfreq_enable: true
#midfreq_gain: 0.20
#midfreq_sigma_lo: 0.95
#midfreq_sigma_hi: 2.20

midfreq_gain: 0.62
midfreq_sigma_lo: 0.50
midfreq_sigma_hi: 1.2

# QSilk-AQClip-Lite (adaptive latent clipping)
aqclip_enable: true
aq_tile: 48
aq_stride: 32
aq_alpha: 1.6

aq_attn: false
# KV pruning (self-attention speedup)
kv_prune_enable: true
kv_keep: 0.80
kv_min_tokens: 256

#kv_keep: 0.85
#kv_min_tokens: 128
[step4]
# core
seed: 0
control_after_generate: randomize
steps: 25
cfg: 6.0
#0.75
denoise: 0.45
sampler_name: ddim
scheduler: MGHybrid
iterations: 2
steps_delta: 5.00
cfg_delta: 0.03
denoise_delta: 0.0500

# toggles
apply_sharpen: true
apply_upscale: true
apply_ids: true
clip_clean: true
latent_compare: true

# detail controls
ids_strength: 0.30
upscale_method: lanczos
scale_by: 1.58
scale_delta: 0.04
noise_offset: 0.02
threshold: 1.000
Sharpnes_strenght: 0.185
accumulation: fp32+fp32

# reference clean
reference_clean: true
ref_preview: 512
ref_threshold: 0.200
ref_cooldown: 2


# guidance
guidance_mode: ZeResFDG
rescale_multiplier: 0.95
momentum_beta: 0.15
cfg_curve: 0.80
perp_damp: 0.75

# NAG
use_nag: true
nag_scale: 4.0
nag_tau: 2.50
nag_alpha: 0.25

# zero init
use_zero_init: false
zero_init_steps: 0

# FDG / ZE thresholds
fdg_low: 0.25
fdg_high: 0.7
fdg_sigma: 1.20
ze_res_zero_steps: 12
ze_adaptive: true
ze_r_switch_hi: 0.85
ze_r_switch_lo: 0.25
fdg_low_adaptive: true
fdg_low_min: 0.45
fdg_low_max: 0.85
fdg_ema_beta: 0.45


# Mahiro+/Muse blend
muse_blend: true
muse_blend_strength: 0.25

# eps scale
eps_scale_enable: true
eps_scale: 0.0025

# CLIPSeg
clipseg_enable: true
clipseg_text: hand, feet, face
clipseg_preview: 512
clipseg_threshold: 0.1
clipseg_blur: 11.5
clipseg_dilate: 5
clipseg_gain: 0.35
clipseg_blend: fuse
clipseg_ref_gate: true
clipseg_ref_threshold: 0.005
#seg_use_cf_edges: false

# polish
polish_enable: false
polish_keep_low: 0.40
polish_edge_lock: 0.10
polish_sigma: 1.0
polish_start_after: 2
polish_keep_low_ramp: 0.10

# mid-frequency stabilizer (hands/objects scale)
midfreq_enable: true
midfreq_gain: 0.72
midfreq_sigma_lo: 0.50
midfreq_sigma_hi: 1.2

# QSilk-AQClip-Lite (adaptive latent clipping)
aqclip_enable: true
aq_tile: 64
aq_stride: 8
aq_alpha: 2.0

aq_attn: true
# KV pruning (self-attention speedup)
kv_prune_enable: false
kv_keep: 0.95
kv_min_tokens: 256

