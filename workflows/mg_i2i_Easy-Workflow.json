{"id":"60c773b8-82a2-4742-afe9-f7f6fe6b9a04","revision":0,"last_node_id":83,"last_link_id":180,"nodes":[{"id":1,"type":"PreviewImage","pos":[2884.465937610835,2284.3128205251587],"size":[454.34515960057956,487.52469509807827],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":176}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":2,"type":"PreviewImage","pos":[3450.7270738074285,2290.6559427564325],"size":[454.34515960057956,487.52469509807827],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":2}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":3,"type":"SaveImage","pos":[4746.375950994036,2270.583243840007],"size":[645.60324992196,715.7559184038435],"flags":{},"order":39,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":3},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{},"widgets_values":["ComfyUI"]},{"id":4,"type":"MG_ControlFusion_Easy","pos":[4913.514494084129,1368.15211360245],"size":[270,258],"flags":{},"order":35,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":4},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":5},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":6},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"enable_depth","name":"enable_depth","type":"BOOLEAN","widget":{"name":"enable_depth"},"link":null},{"localized_name":"enable_pyra","name":"enable_pyra","type":"BOOLEAN","widget":{"name":"enable_pyra"},"link":null},{"localized_name":"edge_alpha","name":"edge_alpha","type":"FLOAT","widget":{"name":"edge_alpha"},"link":null},{"localized_name":"blend_factor","name":"blend_factor","type":"FLOAT","widget":{"name":"blend_factor"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[42]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[43]},{"localized_name":"Mask_Preview","name":"Mask_Preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"MG_ControlFusion_Easy"},"widgets_values":["Step 4",false,true,true,1,0.02]},{"id":10,"type":"Reroute","pos":[4077.6098641914527,2046.1024553349027],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":10}],"outputs":[{"name":"","type":"VAE","links":[14,37,58]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":11,"type":"Reroute","pos":[4076.167764830388,2077.8286412783295],"size":[75,26],"flags":{},"order":16,"mode":0,"inputs":[{"name":"","type":"*","link":11}],"outputs":[{"name":"","type":"CLIP_VISION","links":[15,40]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#2a363b","bgcolor":"#3f5159"},{"id":12,"type":"Reroute","pos":[4075.4617755168,2105.748398836574],"size":[75,26],"flags":{},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":12}],"outputs":[{"name":"","type":"CONTROL_NET","links":[16,57]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":13,"type":"Reroute","pos":[4797.217445362814,2015.818368752541],"size":[75,26],"flags":{},"order":28,"mode":0,"inputs":[{"name":"","type":"*","link":13}],"outputs":[{"name":"","type":"MODEL","links":[]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":14,"type":"Reroute","pos":[4797.217445362811,2050.4287534180976],"size":[75,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":14}],"outputs":[{"name":"","type":"VAE","links":[8,44]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":15,"type":"Reroute","pos":[4797.21744536281,2080.712840000459],"size":[75,26],"flags":{},"order":21,"mode":0,"inputs":[{"name":"","type":"*","link":15}],"outputs":[{"name":"","type":"CLIP_VISION","links":[47]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#2a363b","bgcolor":"#3f5159"},{"id":16,"type":"Reroute","pos":[4793.627257327094,2112.9588956418975],"size":[75,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":16}],"outputs":[{"name":"","type":"CONTROL_NET","links":[7]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":18,"type":"Reroute","pos":[3449.98748634409,2075.9548099867097],"size":[75,26],"flags":{},"order":11,"mode":0,"inputs":[{"name":"","type":"*","link":18}],"outputs":[{"name":"","type":"CLIP_VISION","links":[11,33]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#2a363b","bgcolor":"#3f5159"},{"id":20,"type":"Reroute","pos":[4079.0519635525197,2011.4920706693465],"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":20}],"outputs":[{"name":"","type":"MODEL","links":[13]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":21,"type":"PreviewImage","pos":[4026.546016935376,2275.261323812782],"size":[607.2076918734667,715.3763941463438],"flags":{},"order":36,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":21}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":23,"type":"Reroute","pos":[3448.646444121253,2007.1762148356277],"size":[75,26],"flags":{},"order":19,"mode":0,"inputs":[{"name":"","type":"*","link":23}],"outputs":[{"name":"","type":"MODEL","links":[20]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":24,"type":"MG_CleanUp","pos":[5370.358554929926,1709.5824731241655],"size":[274.736328125,126],"flags":{},"order":38,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":24},{"localized_name":"hard_trim","name":"hard_trim","shape":7,"type":"BOOLEAN","widget":{"name":"hard_trim"},"link":null},{"localized_name":"sync_cuda","name":"sync_cuda","shape":7,"type":"BOOLEAN","widget":{"name":"sync_cuda"},"link":null},{"localized_name":"hires_only_threshold","name":"hires_only_threshold","shape":7,"type":"INT","widget":{"name":"hires_only_threshold"},"link":null}],"outputs":[{"localized_name":"samples","name":"samples","type":"LATENT","links":null},{"localized_name":"Preview","name":"Preview","type":"IMAGE","links":[25]}],"properties":{"Node name for S&R":"MG_CleanUp"},"widgets_values":[true,true,0],"color":"#322","bgcolor":"#533"},{"id":25,"type":"PreviewImage","pos":[5664.810028980939,1726.142161169456],"size":[157.04299244894992,108.59296340644846],"flags":{},"order":40,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":25}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":30,"type":"ComfyAdaptiveDetailEnhancer25_Easy","pos":[4897.0981210228965,1686.3274211129108],"size":[304.44140625,394],"flags":{},"order":37,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":179},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":42},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":43},{"localized_name":"vae","name":"vae","type":"VAE","link":44},{"localized_name":"latent","name":"latent","type":"LATENT","link":45},{"localized_name":"reference_image","name":"reference_image","shape":7,"type":"IMAGE","link":46},{"localized_name":"clip_vision","name":"clip_vision","shape":7,"type":"CLIP_VISION","link":47},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"clipseg_text","name":"clipseg_text","shape":7,"type":"STRING","widget":{"name":"clipseg_text"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[24]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[3]},{"localized_name":"mask_preview","name":"mask_preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"ComfyAdaptiveDetailEnhancer25_Easy"},"widgets_values":["Step 4",false,0,"fixed",10,7,0.45,"ddim","MGHybrid","hand, feet, face"]},{"id":77,"type":"LoadImage","pos":[2092.336327131442,1865.1451439960947],"size":[402.20709228515625,435.9903259277344],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[152]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["example.png","image"]},{"id":19,"type":"Reroute","pos":[3450.1562244649003,2110.180877038012],"size":[75,26],"flags":{},"order":12,"mode":0,"inputs":[{"name":"","type":"*","link":19}],"outputs":[{"name":"","type":"CONTROL_NET","links":[12,172]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":17,"type":"Reroute","pos":[3450.223860408597,2043.968889825176],"size":[75,26],"flags":{},"order":15,"mode":0,"inputs":[{"name":"","type":"*","link":17}],"outputs":[{"name":"","type":"VAE","links":[10,30,173]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":6,"type":"Note","pos":[1338.6040463570225,2370.619326396736],"size":[213.5817209730206,155.86666460906906],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"Negative","properties":{},"widgets_values":["---->\n\n(super-wrong:1) - it's a trigger negative prompt for 'mg_7lambda_negative'"],"color":"#322","bgcolor":"#533"},{"id":26,"type":"Note","pos":[1595.8785798359925,876.9336333382887],"size":[401.2465521468756,118.73473957951177],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The `CombiNode` node is optional, you can replace it with standard ComfyUI pipelines.\n"],"color":"#432","bgcolor":"#653"},{"id":82,"type":"Note","pos":[2529.783064823747,2169.032484209746],"size":[279.1007362646736,120.47967980640027],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"image","properties":{},"widgets_values":["<----\nJust place your image in \"ComfyUI\\input\""],"color":"#432","bgcolor":"#653"},{"id":78,"type":"HintImageEnchance","pos":[2235.7671945366137,1716.9078807171477],"size":[256.2369140625,106],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"hint_image","name":"hint_image","type":"IMAGE","link":152},{"localized_name":"image_gen_width","name":"image_gen_width","type":"INT","widget":{"name":"image_gen_width"},"link":153},{"localized_name":"image_gen_height","name":"image_gen_height","type":"INT","widget":{"name":"image_gen_height"},"link":154},{"localized_name":"resize_mode","name":"resize_mode","type":"COMBO","widget":{"name":"resize_mode"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[151]}],"properties":{"Node name for S&R":"HintImageEnchance"},"widgets_values":[616,616,"Crop and Resize"]},{"id":75,"type":"MG_ControlFusion_Easy","pos":[3013.4570227886243,1368.71450057186],"size":[270,258],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":150},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":162},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":163},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":161},{"localized_name":"vae","name":"vae","type":"VAE","link":164},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"enable_depth","name":"enable_depth","type":"BOOLEAN","widget":{"name":"enable_depth"},"link":null},{"localized_name":"enable_pyra","name":"enable_pyra","type":"BOOLEAN","widget":{"name":"enable_pyra"},"link":null},{"localized_name":"edge_alpha","name":"edge_alpha","type":"FLOAT","widget":{"name":"edge_alpha"},"link":null},{"localized_name":"blend_factor","name":"blend_factor","type":"FLOAT","widget":{"name":"blend_factor"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[165,169]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[166,170]},{"localized_name":"Mask_Preview","name":"Mask_Preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"MG_ControlFusion_Easy"},"widgets_values":["Step 2",false,true,true,0.21,0.02]},{"id":9,"type":"CLIPVisionLoader","pos":[3049.0760921554574,997.0998231601092],"size":[267.557917518395,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","links":[18,53]}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["clip_vision_h.safetensors"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":8,"type":"ControlNetLoader","pos":[3051.691970345036,1102.930457427755],"size":[271.9963341032716,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"label":"CONTROL_NET","localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","slot_index":0,"links":[19,161]}],"properties":{"Node name for S&R":"ControlNetLoader","models":[{"name":"control_v11p_sd15_scribble_fp16.safetensors","url":"https://huggingface.co/comfyanonymous/ControlNet-v1-1_fp16_safetensors/resolve/main/control_v11p_sd15_scribble_fp16.safetensors?download=true","directory":"controlnet"}]},"widgets_values":["diffusers_xl_depth_full.safetensors"],"color":"#233","bgcolor":"#355"},{"id":76,"type":"Reroute","pos":[2687.1609824926077,1717.8924797892369],"size":[75,26],"flags":{},"order":18,"mode":0,"inputs":[{"name":"","type":"*","link":151}],"outputs":[{"name":"","type":"IMAGE","links":[150,156,157]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":27,"type":"MagicSeedLatent","pos":[2576.434466458325,1365.2762232713521],"size":[270,198],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":26},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":156},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":158},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":160},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"sigma","name":"sigma","type":"FLOAT","widget":{"name":"sigma"},"link":null},{"localized_name":"bias","name":"bias","type":"FLOAT","widget":{"name":"bias"},"link":null},{"localized_name":"mix_image","name":"mix_image","type":"BOOLEAN","widget":{"name":"mix_image"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[52]}],"properties":{"Node name for S&R":"MagicSeedLatent"},"widgets_values":[616,616,1,0.9,1.6,true],"color":"#323","bgcolor":"#535"},{"id":29,"type":"ComfyAdaptiveDetailEnhancer25_Easy","pos":[4191.061549347731,1681.268255755782],"size":[304.44140625,394],"flags":{},"order":34,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":178},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":35},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":36},{"localized_name":"vae","name":"vae","type":"VAE","link":37},{"localized_name":"latent","name":"latent","type":"LATENT","link":38},{"localized_name":"reference_image","name":"reference_image","shape":7,"type":"IMAGE","link":39},{"localized_name":"clip_vision","name":"clip_vision","shape":7,"type":"CLIP_VISION","link":40},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"clipseg_text","name":"clipseg_text","shape":7,"type":"STRING","widget":{"name":"clipseg_text"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[45]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[4,21,46]},{"localized_name":"mask_preview","name":"mask_preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"ComfyAdaptiveDetailEnhancer25_Easy"},"widgets_values":["Step 3",false,0,"fixed",10,7,0.55,"ddim","MGHybrid","hand, feet, face"]},{"id":28,"type":"ComfyAdaptiveDetailEnhancer25_Easy","pos":[3540.1890317144343,1679.2051012843713],"size":[304.44140625,394],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":177},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":175},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":174},{"localized_name":"vae","name":"vae","type":"VAE","link":30},{"localized_name":"latent","name":"latent","type":"LATENT","link":31},{"localized_name":"reference_image","name":"reference_image","shape":7,"type":"IMAGE","link":32},{"localized_name":"clip_vision","name":"clip_vision","shape":7,"type":"CLIP_VISION","link":33},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"clipseg_text","name":"clipseg_text","shape":7,"type":"STRING","widget":{"name":"clipseg_text"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[38]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[2,39,54]},{"localized_name":"mask_preview","name":"mask_preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"ComfyAdaptiveDetailEnhancer25_Easy"},"widgets_values":["Step 2",false,0,"fixed",10,7,0.65,"ddim","MGHybrid","hand, feet, face"]},{"id":80,"type":"MG_ControlFusion_Easy","pos":[3572.947343582993,1364.9067309972518],"size":[270,258],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":171},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":169},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":170},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":172},{"localized_name":"vae","name":"vae","type":"VAE","link":173},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"enable_depth","name":"enable_depth","type":"BOOLEAN","widget":{"name":"enable_depth"},"link":null},{"localized_name":"enable_pyra","name":"enable_pyra","type":"BOOLEAN","widget":{"name":"enable_pyra"},"link":null},{"localized_name":"edge_alpha","name":"edge_alpha","type":"FLOAT","widget":{"name":"edge_alpha"},"link":null},{"localized_name":"blend_factor","name":"blend_factor","type":"FLOAT","widget":{"name":"blend_factor"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[167,175]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[168,174]},{"localized_name":"Mask_Preview","name":"Mask_Preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"MG_ControlFusion_Easy"},"widgets_values":["Step 2",false,true,true,0.21,0.02]},{"id":22,"type":"PatchSageAttention","pos":[2576.7165422415105,1263.0149506250725],"size":[270,58],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":22},{"localized_name":"sage_attention","name":"sage_attention","type":"COMBO","widget":{"name":"sage_attention"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[23,48,177,178,179]}],"properties":{"Node name for S&R":"PatchSageAttention"},"widgets_values":["auto_quality"],"color":"#223","bgcolor":"#335"},{"id":33,"type":"MG_ControlFusion_Easy","pos":[4216.41458622107,1364.9839575417363],"size":[270,258],"flags":{},"order":33,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":54},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":167},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":168},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":57},{"localized_name":"vae","name":"vae","type":"VAE","link":58},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"enable_depth","name":"enable_depth","type":"BOOLEAN","widget":{"name":"enable_depth"},"link":null},{"localized_name":"enable_pyra","name":"enable_pyra","type":"BOOLEAN","widget":{"name":"enable_pyra"},"link":null},{"localized_name":"edge_alpha","name":"edge_alpha","type":"FLOAT","widget":{"name":"edge_alpha"},"link":null},{"localized_name":"blend_factor","name":"blend_factor","type":"FLOAT","widget":{"name":"blend_factor"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[5,35]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[6,36]},{"localized_name":"Mask_Preview","name":"Mask_Preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"MG_ControlFusion_Easy"},"widgets_values":["Step 3",false,true,true,1,0.02]},{"id":81,"type":"Note","pos":[2064.4094099995527,1049.7590667735403],"size":[407.51456384966184,142.9113561474026],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["You need install \"comfyui_controlnet_aux\".\n\nThe pipeline enlarges the image at each step, so you need to keep the start small.\n500x700 +-"],"color":"#432","bgcolor":"#653"},{"id":5,"type":"Note","pos":[1310.4341457474434,1886.6654226806243],"size":[255.14152465997358,257.38591799896335],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"title":"Positive","properties":{},"widgets_values":["---->\n\nIn a positive prompt, you need to describe exactly what you have in the initial image.\n\nYou can also add new details through the description, just experiment with it."],"color":"#232","bgcolor":"#353"},{"id":73,"type":"PrimitiveNode","pos":[2098.7818627054025,1311.2915081403646],"size":[280,82],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"image_gen_width"},"links":[153,158]}],"title":"Width","properties":{"Run widget replace on values":false},"widgets_values":[616,"fixed"],"color":"#232","bgcolor":"#353"},{"id":74,"type":"PrimitiveNode","pos":[2098.670739410218,1449.9843622940232],"size":[280,82],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"image_gen_height"},"links":[154,160]}],"title":"Height","properties":{"Run widget replace on values":false},"widgets_values":[616,"fixed"],"color":"#232","bgcolor":"#353"},{"id":31,"type":"ComfyAdaptiveDetailEnhancer25_Easy","pos":[2997.3946462495296,1699.743934547167],"size":[304.44140625,394],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":48},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":165},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":166},{"localized_name":"vae","name":"vae","type":"VAE","link":51},{"localized_name":"latent","name":"latent","type":"LATENT","link":52},{"localized_name":"reference_image","name":"reference_image","shape":7,"type":"IMAGE","link":157},{"localized_name":"clip_vision","name":"clip_vision","shape":7,"type":"CLIP_VISION","link":53},{"localized_name":"preset_step","name":"preset_step","type":"COMBO","widget":{"name":"preset_step"},"link":null},{"localized_name":"custom","name":"custom","type":"BOOLEAN","widget":{"name":"custom"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"clipseg_text","name":"clipseg_text","shape":7,"type":"STRING","widget":{"name":"clipseg_text"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[31]},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[32,171,176]},{"localized_name":"mask_preview","name":"mask_preview","type":"IMAGE","links":[]}],"properties":{"Node name for S&R":"ComfyAdaptiveDetailEnhancer25_Easy"},"widgets_values":["Step 1",true,1009998072731991,"randomize",12,5,0.52,"ddim","MGHybrid","hand, feet, face"]},{"id":32,"type":"MagicNodesCombiNode","pos":[1588.480249989365,1054.0613070965742],"size":[439.3682369626521,1874.7812342789503],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model_in","name":"model_in","shape":7,"type":"MODEL","link":null},{"localized_name":"clip_in","name":"clip_in","shape":7,"type":"CLIP","link":null},{"localized_name":"vae_in","name":"vae_in","shape":7,"type":"VAE","link":null},{"localized_name":"positive_in","name":"positive_in","shape":7,"type":"CONDITIONING","link":null},{"localized_name":"negative_in","name":"negative_in","shape":7,"type":"CONDITIONING","link":null},{"localized_name":"use_checkpoint","name":"use_checkpoint","type":"BOOLEAN","widget":{"name":"use_checkpoint"},"link":null},{"localized_name":"checkpoint","name":"checkpoint","type":"COMBO","widget":{"name":"checkpoint"},"link":null},{"localized_name":"clear_cache","name":"clear_cache","type":"BOOLEAN","widget":{"name":"clear_cache"},"link":null},{"localized_name":"use_lora_1","name":"use_lora_1","type":"BOOLEAN","widget":{"name":"use_lora_1"},"link":null},{"localized_name":"lora_1","name":"lora_1","type":"COMBO","widget":{"name":"lora_1"},"link":null},{"localized_name":"strength_model_1","name":"strength_model_1","type":"FLOAT","widget":{"name":"strength_model_1"},"link":null},{"localized_name":"strength_clip_1","name":"strength_clip_1","type":"FLOAT","widget":{"name":"strength_clip_1"},"link":null},{"localized_name":"use_lora_2","name":"use_lora_2","type":"BOOLEAN","widget":{"name":"use_lora_2"},"link":null},{"localized_name":"lora_2","name":"lora_2","type":"COMBO","widget":{"name":"lora_2"},"link":null},{"localized_name":"strength_model_2","name":"strength_model_2","type":"FLOAT","widget":{"name":"strength_model_2"},"link":null},{"localized_name":"strength_clip_2","name":"strength_clip_2","type":"FLOAT","widget":{"name":"strength_clip_2"},"link":null},{"localized_name":"use_lora_3","name":"use_lora_3","type":"BOOLEAN","widget":{"name":"use_lora_3"},"link":null},{"localized_name":"lora_3","name":"lora_3","type":"COMBO","widget":{"name":"lora_3"},"link":null},{"localized_name":"strength_model_3","name":"strength_model_3","type":"FLOAT","widget":{"name":"strength_model_3"},"link":null},{"localized_name":"strength_clip_3","name":"strength_clip_3","type":"FLOAT","widget":{"name":"strength_clip_3"},"link":null},{"localized_name":"use_lora_4","name":"use_lora_4","type":"BOOLEAN","widget":{"name":"use_lora_4"},"link":null},{"localized_name":"lora_4","name":"lora_4","type":"COMBO","widget":{"name":"lora_4"},"link":null},{"localized_name":"strength_model_4","name":"strength_model_4","type":"FLOAT","widget":{"name":"strength_model_4"},"link":null},{"localized_name":"strength_clip_4","name":"strength_clip_4","type":"FLOAT","widget":{"name":"strength_clip_4"},"link":null},{"localized_name":"use_lora_5","name":"use_lora_5","type":"BOOLEAN","widget":{"name":"use_lora_5"},"link":null},{"localized_name":"lora_5","name":"lora_5","type":"COMBO","widget":{"name":"lora_5"},"link":null},{"localized_name":"strength_model_5","name":"strength_model_5","type":"FLOAT","widget":{"name":"strength_model_5"},"link":null},{"localized_name":"strength_clip_5","name":"strength_clip_5","type":"FLOAT","widget":{"name":"strength_clip_5"},"link":null},{"localized_name":"use_lora_6","name":"use_lora_6","type":"BOOLEAN","widget":{"name":"use_lora_6"},"link":null},{"localized_name":"lora_6","name":"lora_6","type":"COMBO","widget":{"name":"lora_6"},"link":null},{"localized_name":"strength_model_6","name":"strength_model_6","type":"FLOAT","widget":{"name":"strength_model_6"},"link":null},{"localized_name":"strength_clip_6","name":"strength_clip_6","type":"FLOAT","widget":{"name":"strength_clip_6"},"link":null},{"localized_name":"positive_prompt","name":"positive_prompt","shape":7,"type":"STRING","widget":{"name":"positive_prompt"},"link":null},{"localized_name":"negative_prompt","name":"negative_prompt","shape":7,"type":"STRING","widget":{"name":"negative_prompt"},"link":null},{"localized_name":"clip_set_last_layer_positive","name":"clip_set_last_layer_positive","shape":7,"type":"INT","widget":{"name":"clip_set_last_layer_positive"},"link":null},{"localized_name":"clip_set_last_layer_negative","name":"clip_set_last_layer_negative","shape":7,"type":"INT","widget":{"name":"clip_set_last_layer_negative"},"link":null},{"localized_name":"recipe_slot","name":"recipe_slot","shape":7,"type":"COMBO","widget":{"name":"recipe_slot"},"link":null},{"localized_name":"recipe_save","name":"recipe_save","shape":7,"type":"BOOLEAN","widget":{"name":"recipe_save"},"link":null},{"localized_name":"recipe_use","name":"recipe_use","shape":7,"type":"BOOLEAN","widget":{"name":"recipe_use"},"link":null},{"localized_name":"standard_pipeline","name":"standard_pipeline","shape":7,"type":"BOOLEAN","widget":{"name":"standard_pipeline"},"link":null},{"localized_name":"clip_lora_pos_gain","name":"clip_lora_pos_gain","shape":7,"type":"FLOAT","widget":{"name":"clip_lora_pos_gain"},"link":null},{"localized_name":"clip_lora_neg_gain","name":"clip_lora_neg_gain","shape":7,"type":"FLOAT","widget":{"name":"clip_lora_neg_gain"},"link":null},{"localized_name":"dynamic_pos","name":"dynamic_pos","shape":7,"type":"BOOLEAN","widget":{"name":"dynamic_pos"},"link":null},{"localized_name":"dynamic_neg","name":"dynamic_neg","shape":7,"type":"BOOLEAN","widget":{"name":"dynamic_neg"},"link":null},{"localized_name":"dyn_seed","name":"dyn_seed","shape":7,"type":"INT","widget":{"name":"dyn_seed"},"link":null},{"localized_name":"dynamic_break_freeze","name":"dynamic_break_freeze","shape":7,"type":"BOOLEAN","widget":{"name":"dynamic_break_freeze"},"link":null},{"localized_name":"show_expanded_prompts","name":"show_expanded_prompts","shape":7,"type":"BOOLEAN","widget":{"name":"show_expanded_prompts"},"link":null},{"localized_name":"save_expanded_prompts","name":"save_expanded_prompts","shape":7,"type":"BOOLEAN","widget":{"name":"save_expanded_prompts"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[22]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":null},{"localized_name":"Positive","name":"Positive","type":"CONDITIONING","links":[162]},{"localized_name":"Negative","name":"Negative","type":"CONDITIONING","links":[163]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":[17,26,51,164]}],"properties":{"Node name for S&R":"MagicNodesCombiNode"},"widgets_values":[true,"None",true,false,"None",-1,0.2,false,"None",0,0,false,"None",0,0,false,"None",0,0,false,"None",0,0,false,"None",false,false,"(correct human anatomy:1.1).\n(masterwork:1.1), very aesthetic, super detailed, newest, masterpiece, amazing quality, highres, sharpen image, best quality.\n25yrs, 1woman, blue eyes, pink dress, blonde hair, yellow foxy ears, gentle smile, happy, hands wide, outdoor","(super-wrong:1.4), wrong, worst, mistake, (anatomically incorrect human:1), wrong geometry\n(six fingers:1), pixelated,\n(bad hands:1), deformed nails, (fused fingers), (incorrecting hold in hand:1), bad fingers\nugly, (bad anatomy), junior artist, beginner's drawing, bad composition, loose, underpainting, muddy colors, broken symmetry, unclear focal point, blurry details, incorrect perspective, shaky outlines, uneven lines,\n(unsharpen eyes:1), imperfect eyes, skewed eyes, unnatural face, unnatural body, extra limb, missing limbs, distorted eyelashes, misplaced pupils, noisly eyes, long neck,\nobject clipping, clothing clipping, object intersection, unrealistic overlap, geometry intersection,\ntext, typo, signature, watermarks on image, error",-2,-2,"Off",false,false,false,0.95,1.1,false,false,0,false,false,false]}],"links":[[2,28,1,2,0,"IMAGE"],[3,30,1,3,0,"IMAGE"],[4,29,1,4,0,"IMAGE"],[5,33,0,4,1,"CONDITIONING"],[6,33,1,4,2,"CONDITIONING"],[7,16,0,4,3,"CONTROL_NET"],[8,14,0,4,4,"VAE"],[10,17,0,10,0,"*"],[11,18,0,11,0,"*"],[12,19,0,12,0,"*"],[13,20,0,13,0,"*"],[14,10,0,14,0,"*"],[15,11,0,15,0,"*"],[16,12,0,16,0,"*"],[17,32,4,17,0,"*"],[18,9,0,18,0,"*"],[19,8,0,19,0,"*"],[20,23,0,20,0,"*"],[21,29,1,21,0,"IMAGE"],[22,32,0,22,0,"MODEL"],[23,22,0,23,0,"*"],[24,30,0,24,0,"LATENT"],[25,24,1,25,0,"IMAGE"],[26,32,4,27,0,"VAE"],[30,17,0,28,3,"VAE"],[31,31,0,28,4,"LATENT"],[32,31,1,28,5,"IMAGE"],[33,18,0,28,6,"CLIP_VISION"],[35,33,0,29,1,"CONDITIONING"],[36,33,1,29,2,"CONDITIONING"],[37,10,0,29,3,"VAE"],[38,28,0,29,4,"LATENT"],[39,28,1,29,5,"IMAGE"],[40,11,0,29,6,"CLIP_VISION"],[42,4,0,30,1,"CONDITIONING"],[43,4,1,30,2,"CONDITIONING"],[44,14,0,30,3,"VAE"],[45,29,0,30,4,"LATENT"],[46,29,1,30,5,"IMAGE"],[47,15,0,30,6,"CLIP_VISION"],[48,22,0,31,0,"MODEL"],[51,32,4,31,3,"VAE"],[52,27,0,31,4,"LATENT"],[53,9,0,31,6,"CLIP_VISION"],[54,28,1,33,0,"IMAGE"],[57,12,0,33,3,"CONTROL_NET"],[58,10,0,33,4,"VAE"],[150,76,0,75,0,"IMAGE"],[151,78,0,76,0,"*"],[152,77,0,78,0,"IMAGE"],[153,73,0,78,1,"INT"],[154,74,0,78,2,"INT"],[156,76,0,27,1,"IMAGE"],[157,76,0,31,5,"IMAGE"],[158,73,0,27,2,"INT"],[160,74,0,27,3,"INT"],[161,8,0,75,3,"CONTROL_NET"],[162,32,2,75,1,"CONDITIONING"],[163,32,3,75,2,"CONDITIONING"],[164,32,4,75,4,"VAE"],[165,75,0,31,1,"CONDITIONING"],[166,75,1,31,2,"CONDITIONING"],[167,80,0,33,1,"CONDITIONING"],[168,80,1,33,2,"CONDITIONING"],[169,75,0,80,1,"CONDITIONING"],[170,75,1,80,2,"CONDITIONING"],[171,31,1,80,0,"IMAGE"],[172,19,0,80,3,"CONTROL_NET"],[173,17,0,80,4,"VAE"],[174,80,1,28,2,"CONDITIONING"],[175,80,0,28,1,"CONDITIONING"],[176,31,1,1,0,"IMAGE"],[177,22,0,28,0,"MODEL"],[178,22,0,29,0,"MODEL"],[179,22,0,30,0,"MODEL"]],"groups":[{"id":1,"title":"Step1 - Pre-warm","bounding":[2938.016511688109,913.824151350121,410.63220695429527,1236.8489502485374],"color":"#a1309b","font_size":22,"flags":{}},{"id":2,"title":"Step2 - warming","bounding":[3441.738497312564,909.7156271587139,464.03429546870484,1238.2310938486526],"color":"#b58b2a","font_size":22,"flags":{}},{"id":3,"title":"Step3 - Pre-ready","bounding":[4060.4429377527845,903.5563858047719,518.639493048679,1245.9769642733752],"color":"#3f789e","font_size":22,"flags":{}},{"id":4,"title":"Step4 - High-res","bounding":[4786.616641109726,908.064054901471,526.8246054854121,1235.0376260654407],"color":"#8A8","font_size":22,"flags":{}},{"id":5,"title":"1 - Pre-warm","bounding":[2862.833155891995,2191.562781978611,505.331679024805,647.6692243308507],"color":"#a1309b","font_size":22,"flags":{}},{"id":6,"title":"2 - warming","bounding":[3428.1002704533203,2191.2512226651224,505.331679024805,647.6692243308507],"color":"#b58b2a","font_size":22,"flags":{}},{"id":7,"title":"3 - Pre-ready","bounding":[3990.7445131687105,2187.583046290339,683.3155821674318,849.0584001035625],"color":"#3f789e","font_size":22,"flags":{}},{"id":8,"title":"Step4 - High-res","bounding":[4721.874468234992,2189.32798651723,700.3585746163794,850.3693995227123],"color":"#8A8","font_size":22,"flags":{}},{"id":9,"title":"Cleaner","bounding":[5351.481167804097,1622.5732070566082,500.52484026624325,251.74092390864666],"color":"#A88","font_size":22,"flags":{}},{"id":10,"title":"Starting latent size","bounding":[2066.0797369059856,1218.8356155226418,342.4130663190781,346.97585471395735],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"Refining image","bounding":[2061.3283348984023,1581.2822346324417,780.5949571786687,742.7744453518492],"color":"#8A8","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.351305709310435,"offset":[-1534.577748191942,-944.4325818841039]},"workflowRendererVersion":"LG"},"version":0.4}